<form id="delete-form" method="post" action="{{ path('app_reservation_delete', {'idreservation': reservation.idreservation}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ reservation.idreservation) }}">
    <button id="delete-button" class="btn">Delete</button>
</form>

<div id="progress-bar" class="alert alert-info" role="alert" style="display: none;">
    <strong>Chargement en cours...</strong>
    <div class="progress">
        <div id="progress-bar-inner" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#delete-button').click(function(e) {
            e.preventDefault();

            // Afficher la barre de progression
            $('#progress-bar').show();

            // Exécuter une action asynchrone (par exemple, suppression)
            $.ajax({
                type: 'POST',
                url: $('#delete-form').attr('action'),
                data: $('#delete-form').serialize(),
                success: function(response) {
                    // Mettre à jour la barre de progression à 100% après un délai de 2 secondes
                    $('#progress-bar-inner').animate({ width: '100%' }, 2000, function() {
                        // Masquer la barre de progression après l'achèvement
                        $('#progress-bar').fadeOut();
                    });

                    // Rediriger vers une autre page après la suppression réussie
                    setTimeout(function() {
                        window.location.href = "{{ path('app_reservationback') }}";
                    }, 2000); // Redirection après 2 secondes
                },
                error: function(xhr, status, error) {
                    // Masquer la barre de progression en cas d'erreur
                    $('#progress-bar').hide();
                    // Afficher un message d'erreur
                    alert('An error occurred while deleting item');
                }
            });
        });
    });
</script>
