{% extends 'back-base.html.twig' %}
{% block body %}
<div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
        <div class="card-body">
            <div class="table-responsive">
                <h4 class="card-title text-dark">Liste des avis d'équipements</h4>

                
                <input type="text" class="form-control" id="searchInput" placeholder="Rechercher">
                
                <table class="table table-striped mt-3" id="searchResultsTable">
                    <thead>
                        <tr>
                            <th>Utilisateur</th>
                            <th>Commentaire</th>
                            <th>Equipement</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for avisequipement in avisequipements %}
                            <tr>
                                <td>
                                    {#<img src="{{ asset(avisequipement.idUs.image) }}" style="width: 50px; height: 50px;" />#}
                                    {{ avisequipement.idUs.nom ~ ' ' ~ avisequipement.idUs.prenom }}
                                </td>
                                <td>{{ avisequipement.commaeq }}</td>
                                <td>
                                    <img src="{{ path('user_images', {'imageName': avisequipement.idEq.imageeq|url_encode}) }}"style="width: 50px; height: 50px;">

                                    {{ avisequipement.idEq.nomeq }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
                <br>
                <br>
                <a href="{{ path('app_equipement_back_index') }}" class="btn btn-light mt-3">Consulter les équipements </a>
                <br>
                <br>
            </div>
        </div>
    </div>
</div>







<script>
   
    const searchInput = document.getElementById('searchInput');
    
    const searchResultsTable = document.getElementById('searchResultsTable');
    
    const rows = searchResultsTable.getElementsByTagName('tr');

    
    searchInput.addEventListener('input', function() {
        
        const searchValue = searchInput.value.toLowerCase();

        
        for (let i = 0; i < rows.length; i++) {
            const cells = rows[i].getElementsByTagName('td');
            let found = false;

            for (let j = 0; j < cells.length; j++) {
                const cellText = cells[j].textContent.toLowerCase();
                if (cellText.indexOf(searchValue) > -1) {
                    found = true;
                    break;
                }
            }

            if (found) {
                rows[i].style.display = '';
            } else {
                rows[i].style.display = 'none';
            }
        }
    });
</script>
{% endblock %}
